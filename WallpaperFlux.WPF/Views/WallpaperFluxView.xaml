<views:MvxWpfView
    xmlns:views="clr-namespace:MvvmCross.Platforms.Wpf.Views;assembly=MvvmCross.Platforms.Wpf"
    xmlns:mvx="clr-namespace:MvvmCross.Platforms.Wpf.Binding;assembly=MvvmCross.Platforms.Wpf"
    x:Class="WallpaperFlux.WPF.Views.WallpaperFluxView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:util="clr-namespace:WallpaperFlux.WPF.Util"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:WallpaperFlux.WPF.Views"
    xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
    xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
    xmlns:mvvmCross="clr-namespace:MvvmCross;assembly=MvvmCross"
    xmlns:models="clr-namespace:WallpaperFlux.Core.Models;assembly=WallpaperFlux.Core"
    xmlns:extensions="clr-namespace:LanceTools.WPF.Extensions;assembly=LanceTools.WPF"
    xmlns:ffme="clr-namespace:Unosquare.FFME;assembly=ffme.win"
    xmlns:core="clr-namespace:WallpaperFlux.Core;assembly=WallpaperFlux.Core"
    xmlns:controlModels="clr-namespace:WallpaperFlux.Core.Models.Controls;assembly=WallpaperFlux.Core"
    xmlns:system="clr-namespace:System;assembly=System.Runtime"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:tagging="clr-namespace:WallpaperFlux.Core.Models.Tagging;assembly=WallpaperFlux.Core"
    xmlns:media="https://github.com/mysteryx93/MediaPlayerUI.NET"
    xmlns:gif="http://wpfanimatedgif.codeplex.com"
    xmlns:tb="http://www.hardcodet.net/taskbar"
    mc:Ignorable="d" FontSize="12" FontFamily="Segoe UI"
    d:DesignHeight="450" d:DesignWidth="800"
    SizeChanged="WallpaperFluxView_OnSizeChanged_UpdateInspectorHeight">

    <!-- Might want to take a look at this in the future: https://stackoverflow.com/questions/24925421/execute-command-in-viewmodel-from-mouse-event -->
    <!-- ? Also this to potentially remove some xaml.cs code and other IoC complications https://stackoverflow.com/questions/47199489/wpf-how-to-bind-mousedown-command-action-to-label -->

    <views:MvxWpfView.Resources>
        <ResourceDictionary>
            <system:Double x:Key="InspectorWidth">375</system:Double>
            <system:Double x:Key="ImageSetInspectorWidth">900</system:Double>
            <system:Double x:Key="ImageSetInspectorListBoxWidth">800</system:Double>
            <system:Double x:Key="InspectorCategoryHeight">400</system:Double>
            <system:Double x:Key="InspectorTagHeight">175</system:Double>
            <system:Double x:Key="ImageSelectorItemWidth">150</system:Double>
            <system:Double x:Key="ImageSelectorItemHeight">250</system:Double>

            <!--? Rank Handler Template -->
            <DataTemplate x:Key="RankingHandlerTemplate" DataType="{x:Type models:BaseImageModel}">
                <StackPanel Orientation="Horizontal" Margin="3" Focusable="False" HorizontalAlignment="Center">
                    <!-- Decrease Rank Button -->
                    <Button Command="{Binding DecreaseRankCommand}"
                                        Width="25" Height="{Binding ImageSelectorSettingsHeight}" Margin="3" 
                                        adonisExtensions:CursorSpotlightExtension.BorderBrush="Red"
                                        adonisExtensions:RippleExtension.BorderBrush="Red">
                        <TextBlock Text="-" FontSize="{Binding ImageSelectorSettingsHeight}" Foreground="Red" FontWeight="Bold" Margin="0 -10 0  0"/>
                    </Button>

                    <!-- Rank TextBox -->
                    <TextBox Text="{Binding Rank, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         Width="50" Height="{Binding ImageSelectorSettingsHeight}" Margin="3"
                                                         HorizontalContentAlignment="Center">
                        <TextBox.Style>
                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxNumInput}"/>
                        </TextBox.Style>
                    </TextBox>

                    <!-- Increase Rank Button -->
                    <Button Command="{Binding IncreaseRankCommand}"
                                        Width="25" Height="{Binding ImageSelectorSettingsHeight}" Margin="3" 
                                        adonisExtensions:CursorSpotlightExtension.BorderBrush="LimeGreen"
                                        adonisExtensions:RippleExtension.BorderBrush="LimeGreen">
                        <TextBlock Text="+" FontSize="{Binding ImageSelectorSettingsHeight}" Foreground="LimeGreen" FontWeight="Bold" Margin="-5 -10 0  0"/>
                    </Button>
                </StackPanel>
            </DataTemplate>

            <!--? Image Selector Item Template -->
            <DataTemplate x:Key="ImageSelectorItemTemplate" DataType="{x:Type models:BaseImageModel}">
                <GroupBox HorizontalAlignment="Center">
                    <StackPanel Focusable="False">

                        <!-- /// Binding to ImageModel /// -->
                        <ContentControl Content="{Binding}" HorizontalAlignment="Center">
                            <!-- Resources -->
                            <ContentControl.Resources>
                                <!-- Remember that the Binding context here refers to what's given in the Content of the ContentTemplate, not what ReSharper says -->

                                <!--? //// StaticOrGIFTemplate //// -->
                                <DataTemplate x:Key="StaticOrGIFTemplate" DataType="{x:Type models:ImageModel}">
                                    <!--? Thumbnail -->
                                    <Image ToolTipService.ShowDuration="{StaticResource MaxInt32}"
                                                                       Width="{Binding ImageSelectorThumbnailWidth}"
                                                                       Height="{Binding ImageSelectorThumbnailHeight}"
                                                                       Margin="3"
                                                                       HorizontalAlignment="Center"
                                                                       Loaded="Image_OnLoaded_LowQuality"
                                                                       Unloaded="Image_OnUnloaded">
                                        <!--? ///// Image Tooltip /////-->
                                        <Image.ToolTip>
                                            <ContentControl Content="{Binding}">
                                                <!-- Resources -->
                                                <ContentControl.Resources>
                                                    <!-- Static -->
                                                    <DataTemplate x:Key="StaticTemplate">
                                                        <Image Loaded="Tooltip_Image_OnLoaded"
                                                                                        Unloaded="Tooltip_Image_OnUnloaded"
                                                                                        Stretch="Uniform"
                                                                                        RenderOptions.BitmapScalingMode="HighQuality">
                                                            <!--
                                                            <Image.Source>
                                                                <BitmapImage
                                                                    CacheOption="OnLoad"
                                                                    UriSource="{Binding Path, Mode=OneWay}">
                                                                </BitmapImage>
                                                            </Image.Source>
                                                            -->
                                                        </Image>
                                                    </DataTemplate>
                                                    <!-- GIF -->
                                                    <DataTemplate x:Key="GIFTemplate">
                                                        <ffme:MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" LoopingBehavior="Play"
                                                                                        Loaded="Tooltip_MediaElement_OnLoaded" Unloaded="Tooltip_MediaElement_OnUnloaded" />
                                                    </DataTemplate>
                                                </ContentControl.Resources>
                                                <!--? Template Control -->
                                                <ContentControl.ContentTemplate>
                                                    <DataTemplate>
                                                        <!-- Default Template -->
                                                        <ContentControl Name="cc" Content="{Binding }" 
                                                                                ContentTemplate="{StaticResource StaticTemplate}"/>
                                                        <!-- Triggers -->
                                                        <DataTemplate.Triggers>
                                                            <DataTrigger Binding="{Binding IsGif}" Value="True">
                                                                <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource GIFTemplate}"/>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </ContentControl.ContentTemplate>
                                            </ContentControl>
                                        </Image.ToolTip>

                                        <!--? Image Context Menu -->
                                        <!-- !Changes made here need to be made to the Media Context Menu as well!!! -->
                                        <Image.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="Open File" mvx:Bi.nd="Command OpenFileCommand"/>
                                                <MenuItem Header="Open File Location" mvx:Bi.nd="Command ViewFileCommand"/>
                                                <MenuItem Header="Set As Wallpaper" mvx:Bi.nd="Command SetWallpaperCommand"/>
                                                <Separator/>
                                                <MenuItem Header="Rename" Command="{Binding RenameImageCommand}"/>
                                                <MenuItem Header="Move" Command="{Binding MoveImageCommand}"/>
                                                <MenuItem Header="Delete" Command="{Binding DeleteImageCommand}"/>
                                                <MenuItem Header="Rank" Command="{Binding RankImageCommand}"/>
                                                <Separator/>
                                                <MenuItem Header="Set Tags to Tagboard" Command="{Binding SetTagsToTagBoardCommand}"/>
                                                <MenuItem Header="Paste Tagboard to Image" Command="{Binding PasteTagBoardCommand}"/>
                                                <MenuItem Header="Paste Tags to Tagboard" Command="{Binding PasteTagsToTagBoardCommand}"/>
                                                <Separator/>
                                                <MenuItem Header="Enabled" StaysOpenOnClick="True" IsCheckable="True"
                                                                                IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                ToolTip="Disabling an image will stop it from appearing here, 
                                                                                      if you want to see the image again select Enable Detection of Inactive Images"/>
                                            </ContextMenu>
                                        </Image.ContextMenu>
                                    </Image>
                                </DataTemplate>

                                <!--? //// VideoTemplate //// -->
                                <DataTemplate x:Key="VideoTemplate" DataType="{x:Type models:ImageModel}">
                                    <GroupBox adonisExtensions:LayerExtension.IncreaseLayer="False"
                                                                  Width="{Binding ImageSelectorThumbnailWidthVideo}"
                                                                  Height="{Binding ImageSelectorThumbnailHeight}" 
                                                                  ToolTipService.ShowDuration="{StaticResource MaxInt32}"
                                                                  HorizontalAlignment="Center">

                                        <!--? Thumbnail -->
                                        <!-- Displays the first frame/thumbnail of videos due to the Loaded event -->
                                        <Image Loaded="MediaElement_OnLoaded_GenerateVideoThumbnail" Unloaded="MediaElement_OnUnloaded"/>

                                        <!-- The media element will fail to process the Tooltip & Context Menu, so we used a GroupBox -->
                                        <!--? Media Element Tooltip-->
                                        <GroupBox.ToolTip>
                                            <ContentControl Content="{Binding }">
                                                <ContentControl.Resources>
                                                    <!--? FFME -->
                                                    <DataTemplate x:Key="FFME">
                                                        <ffme:MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" LoopingBehavior="Play"
                                                                                        Loaded="Tooltip_MediaElement_OnLoaded" Unloaded="Tooltip_MediaElement_OnUnloaded" 
                                                                                        Volume="{Binding ActualVolume, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTemplate>
                                                    <!--? Windows -->
                                                    <DataTemplate x:Key="Windows">
                                                        <MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" MediaEnded="MediaElement_OnMediaEnded"
                                                                                        Loaded="Tooltip_MediaElement_OnLoaded" Unloaded="Tooltip_MediaElement_OnUnloaded" 
                                                                                        Volume="{Binding ActualVolume, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTemplate>
                                                </ContentControl.Resources>
                                                <ContentControl.ContentTemplate>
                                                    <DataTemplate>
                                                        <!-- Default Template -->
                                                        <ContentControl Name="cc" Content="{Binding }" 
                                                                                        ContentTemplate="{StaticResource Windows}"/>
                                                        <!-- Triggers -->
                                                        <DataTemplate.Triggers>
                                                            <DataTrigger Binding="{Binding IsWebmOrGif}" Value="True">
                                                                <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource FFME}"/>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </ContentControl.ContentTemplate>
                                            </ContentControl>
                                        </GroupBox.ToolTip>

                                        <!--? Media Element Context Menu-->
                                        <!-- !Changes made here need to be made to the Image Context Menu as well!!! -->
                                        <GroupBox.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem Header="Open File" Command="{Binding OpenFileCommand}"/>
                                                <MenuItem Header="Open File Location" Command="{Binding ViewFileCommand}"/>
                                                <MenuItem Header="Set As Wallpaper" Command="{Binding SetWallpaperCommand}"/>
                                                <Separator/>
                                                <MenuItem Header="Rename" Command="{Binding RenameImageCommand}"/>
                                                <MenuItem Header="Move" Command="{Binding MoveImageCommand}"/>
                                                <MenuItem Header="Delete" Command="{Binding DeleteImageCommand}"/>
                                                <MenuItem Header="Rank" Command="{Binding RankImageCommand}"/>
                                                <MenuItem Header="Paste Tagboard" Command="{Binding PasteTagBoardCommand}"/>
                                                <Separator/>
                                                <MenuItem Header="Set Tags to Tagboard" Command="{Binding SetTagsToTagBoardCommand}"/>
                                                <MenuItem Header="Paste Tagboard to Image" Command="{Binding PasteTagBoardCommand}"/>
                                                <MenuItem Header="Paste Tags to Tagboard" Command="{Binding PasteTagsToTagBoardCommand}"
                                                                                ToolTip="Removes existing tags from the tagboard before pasting the current image's tags"/>
                                                <Separator/>
                                                <MenuItem Header="Enabled" StaysOpenOnClick="True" IsCheckable="True"
                                                                                IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                                ToolTip="Disabling an image will stop it from appearing here, 
                                                                                      if you want to see the image again select Enable Detection of Inactive Images"/>
                                                <Separator/>
                                                <MenuItem Header="Volume" mvx:Bi.nd="Command SetVolumeCommand"/>
                                                <MenuItem Header="Speed" mvx:Bi.nd="Command SetSpeedCommand"/>
                                                <MenuItem Header="Override Max Loop Count"/>
                                                <MenuItem Header="Override Max Video Timer"/>
                                            </ContextMenu>
                                        </GroupBox.ContextMenu>
                                    </GroupBox>
                                </DataTemplate>

                                <!--? //// RelatedImageTemplate //// -->
                                <DataTemplate x:Key="RelatedImageTemplate" DataType="{x:Type models:ImageSetModel}">
                                    <GroupBox adonisExtensions:LayerExtension.IncreaseLayer="False" BorderThickness="2" BorderBrush="SlateBlue"
                                              adonisExtensions:CornerRadiusExtension.CornerRadius="10">
                                        <GroupBox adonisExtensions:LayerExtension.IncreaseLayer="False"
                                              Width="{Binding ImageSelectorThumbnailWidthVideo}"
                                              Height="{Binding ImageSelectorThumbnailHeight}" 
                                              ToolTipService.ShowDuration="{StaticResource MaxInt32}"
                                              HorizontalAlignment="Center">

                                            <!--? Thumbnail -->
                                            <Image ToolTipService.ShowDuration="{StaticResource MaxInt32}"
                                                                           Width="{Binding ImageSelectorThumbnailWidth}"
                                                                           Height="{Binding ImageSelectorThumbnailHeight}"
                                                                           Margin="3"
                                                                           HorizontalAlignment="Center"
                                                                           Loaded="Image_OnLoaded_LowQuality"
                                                                           Unloaded="Image_OnUnloaded">
                                                <Image.ContextMenu>
                                                    <ContextMenu>
                                                        <MenuItem Header="Ranking Format" IsEnabled="False"/>
                                                        <MenuItem Header="Average" IsChecked="{Binding UsingAverageRank, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" StaysOpenOnClick="True" IsCheckable="True"
                                                                  IsEnabled="{Binding UsingAverageRank, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanInverterConverter}}"/>
                                                        <MenuItem Header="Override" IsChecked="{Binding UsingOverrideRank, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" StaysOpenOnClick="True" IsCheckable="True"
                                                                  IsEnabled="{Binding UsingOverrideRank, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanInverterConverter}}"/>
                                                        <MenuItem Header="Weighted" IsChecked="{Binding UsingWeightedRank, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" StaysOpenOnClick="True" IsCheckable="True"
                                                                  IsEnabled="{Binding UsingWeightedRank, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanInverterConverter}}"/>
                                                        <MenuItem Header="{Binding OverrideRankWeightText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="False"/>
                                                        <Slider Value="{Binding OverrideRankWeight}" IsEnabled="{Binding UsingWeightedRank}" Minimum="0" Maximum="100"/>
                                                        <Separator/>
                                                        <MenuItem Header="Enabled" StaysOpenOnClick="True" IsCheckable="True"
                                                                  IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                  ToolTip="Disabling a set will stop it from appearing here, 
                                                                                      if you want to see the set again select Enable Detection of Inactive Images"/>
                                                    </ContextMenu>
                                                </Image.ContextMenu>
                                            </Image>

                                        </GroupBox>
                                    </GroupBox>
                                </DataTemplate>
                            </ContentControl.Resources>

                            <!-- // Template Control // -->
                            <ContentControl.ContentTemplate>
                                <DataTemplate>
                                    <!-- Default Control -->
                                    <ContentControl Name="cc" Content="{Binding }" ContentTemplate="{StaticResource StaticOrGIFTemplate}"/>
                                    <!-- Triggers -->
                                    <DataTemplate.Triggers>
                                        <!-- If IsVideo, use the VideoTemplate instead -->
                                        <DataTrigger Binding="{Binding IsVideo}" Value="True">
                                            <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource VideoTemplate}"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsRelatedImageSet}" Value="True">
                                            <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource RelatedImageTemplate}"/>
                                        </DataTrigger>
                                    </DataTemplate.Triggers>
                                </DataTemplate>
                            </ContentControl.ContentTemplate>
                        </ContentControl>

                        <!--! Currently replaced by the Inspect button, not sure if this will have a use in the future -->
                        <!--x Edit Button -->
                        <!--
                                                    <Button Content="Edit" Width="75" Height="{Binding ImageSelectorSettingsHeight}" Margin="3" 
                                                        HorizontalAlignment="Center"/>
                                                    -->

                        <ContentControl Content="{Binding}" ContentTemplate="{StaticResource RankingHandlerTemplate}"/>
                    </StackPanel>
                </GroupBox>
            </DataTemplate>

        </ResourceDictionary>
    </views:MvxWpfView.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <!--<ColumnDefinition Width="{adonisUi:Space 1}"/>-->
            <ColumnDefinition Width="0"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="0"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--? Toolbar -->
        <Menu Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="10" Padding="2">
            <!-- File -->
            <MenuItem Header="File">
                <MenuItem Header="Load Theme" Command="{Binding LoadThemeCommand}"/>
                <!-- ! Should be disabled when no theme is loaded, saves the current theme to itself -->
                <MenuItem Header="Save Theme" IsEnabled="{Binding IsThemeLoaded}" Command="{Binding SaveThemeCommand}"/>
                <MenuItem Header="Save Theme As" Command="{Binding SaveThemeAsCommand}"/>
            </MenuItem>

            <!-- Edit -->
            <MenuItem Header="Edit">
                <MenuItem Header="Dummy Item"/>
            </MenuItem>

            <!-- Settings -->
            <MenuItem Header="Settings">
                <!-- Set Max Rank -->
                <MenuItem Header="Set Max Rank" mvx:Bi.nd="Command Theme_USE_STATIC_REFERENCE_FIX_LATER.Settings.UpdateMaxRankCommand">
                    <MenuItem.ToolTip>
                        <ToolTip>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Current Max Rank: "/>
                                <TextBlock Text="{Binding Theme_USE_STATIC_REFERENCE_FIX_LATER.Settings.ThemeSettings.MaxRank}"/>
                            </StackPanel>
                        </ToolTip>
                    </MenuItem.ToolTip>
                </MenuItem>
                <MenuItem Header="Toggle Light/Dark Theme [Not implemented]"/>
                <MenuItem Header="More Settings" Click="MenuItem_MoreSettings_Click"/>
            </MenuItem>

            <!-- View -->
            <MenuItem Header="View">
                <MenuItem Header="Dummy Item"/>
            </MenuItem>

            <!-- Go -->
            <!-- Opens folders / goes to files -->
            <MenuItem Header="Go">
                <MenuItem Header="Go To Theme File [Not implemented]"/>
            </MenuItem>

            <!-- Tools -->
            <MenuItem Header="Tools">
                <MenuItem Header="Inspect Rank Distribution [Not Implemented]"/>
                <!--
                <MenuItem Header="De-Render Misc Video Types (Experimental)" Command="{Binding DeRenderWinformCommand}"/>
                -->
            </MenuItem>

            <!-- Help -->
            <MenuItem Header="Help">
                <!--<MenuItem Header="Check for Updates"/>-->
                <!--<MenuItem Header="Donate"/>-->
                <MenuItem Header="About [Not implemented] [Open a page of links to relevant info]"/>
                <MenuItem Header="Open Repository Page [Not implemented]"/>
            </MenuItem>

            <!-- Wallpaper -->
            <!-- You should keep both set of buttons for quick access, just put the Next & Previous Wallpaper buttons behind their own tab -->
            <MenuItem Header="Wallpaper">
                <MenuItem Header="Next Wallpaper" mvx:Bi.nd="Command NextWallpaperCommand" IsEnabled="{Binding CanNextWallpaper}" />
                <MenuItem Header="Previous Wallpaper" mvx:Bi.nd="Command PreviousWallpaperCommand" IsEnabled="{Binding CanPreviousWallpaper}"/>
                <MenuItem Header="Cycle Wallpapers [Not implemented]"/>
            </MenuItem>

            <!-- Tagging -->
            <MenuItem Header="Tagging">
                <MenuItem Header="Open Tag View" Click="MenuItem_OpenTagWindow_Click"/>
            </MenuItem>

            <MenuItem Header="Pagination Test" Click="MenuItem_OpenPaginationTest_Click"/>
        </Menu>

        <Separator Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="10"/>

        <!-- Core Button Controls
        <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal">
            <Button mvx:Bi.nd="Command NextWallpaperCommand" IsEnabled="{Binding CanNextWallpaper}" 
                    Width="135" Height="25" Content="Next Wallpaper" Margin="5"/>
            <Button mvx:Bi.nd="Command PreviousWallpaperCommand" IsEnabled="{Binding CanPreviousWallpaper}" 
                    Width="135" Height="25" Content="Previous Wallpaper" Margin="5"/>
            <Button mvx:Bi.nd="Command LoadThemeCommand" 
                    Width="135" Height="25" Content="Load Theme" Margin="5"/>
        </StackPanel>
        -->

        <!--? Image Folders -->
        <GroupBox Grid.Row="4" Grid.Column="1" adonisExtensions:LayerExtension.IncreaseLayer="True" Margin="0 5 0 5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0"/>
                    <!-- Remove this at some point, will need to adjust columns -->
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="{adonisUi:Space 1}"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <!--
                <TextBlock Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Text="Folders" HorizontalAlignment="Center">
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource FaintHeader}"/>
                    </TextBlock.Style>
                </TextBlock>
                -->

                <!-- Folder Buttons -->
                <Button mvx:Bi.nd="Command AddFolderCommand" Grid.Row="1" Grid.Column="1" Width="135" Height="25" Content="Add Folder" Margin="10" HorizontalAlignment="Stretch"
                    adonisExtensions:CursorSpotlightExtension.BorderBrush="LimeGreen"
                    adonisExtensions:RippleExtension.BackgroundBrush="LimeGreen"/>
                <Button mvx:Bi.nd="Command RemoveFolderCommand"
                        Grid.Row="1" Grid.Column="2" Width="135" Height="25" Content="Remove Folder" Margin="5" IsEnabled="{Binding CanRemoveWallpaper}"
                        adonisExtensions:CursorSpotlightExtension.BorderBrush="Red"
                        adonisExtensions:RippleExtension.BackgroundBrush="Red"/>

                <!-- Folder List -->
                <GroupBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"  adonisExtensions:LayerExtension.IncreaseLayer="True">
                    <ListBox Width="400" Height="300"
                             ItemsSource="{Binding ImageFolders}" SelectedItem="{Binding SelectedImageFolder}" SelectionMode="Extended"
                             adonisExtensions:ScrollViewerExtension.HideScrollBarsUntilMouseOver="True"
                             adonisExtensions:ScrollViewerExtension.VerticalScrollBarPlacement="Overlay"
                             adonisExtensions:ScrollViewerExtension.HorizontalScrollBarPlacement="Overlay">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox VerticalAlignment="Center" Margin="0 0 5 0" IsChecked="{Binding Enabled}"/>
                                    <TextBlock Text="{Binding Path}" FontSize="14">
                                        <TextBlock.ContextMenu>
                                            <ContextMenu>
                                                <!-- Commands found in FolderModel -->
                                                <MenuItem Header="View Folder" mvx:Bi.nd="Command ViewFolderCommand"/>
                                                <Separator/>
                                                <MenuItem Header="Select Images in Folder" mvx:Bi.nd="Command SelectFolderImagesCommand"/>
                                                <MenuItem Header="Select Images in Folder (Selection Options Filter)" mvx:Bi.nd="Command SelectFolderImagesSelectionFilterCommand"/>
                                            </ContextMenu>
                                        </TextBlock.ContextMenu>
                                    </TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </GroupBox>
            </Grid>
        </GroupBox>

        <!--? Display Settings -->
        <GroupBox Grid.Row="5" Grid.Column="1" adonisExtensions:LayerExtension.IncreaseLayer="True" Margin="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0"/>
                    <!-- Remove this at some point, will need to adjust columns -->
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header & Sync -->
                <TextBlock Text="Display Settings" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" HorizontalAlignment="Center"  Margin="5" FontWeight="Bold"/>
                <Button  Content="Sync" IsEnabled="{Binding CanSync}" mvx:Bi.nd="Command SyncCommand" Grid.Row="2" Grid.Column="1" Margin="5">
                    <Button.ToolTip>
                        'Syncing' display settings allows wallpapers to change simultaneously across multiple monitors and applies the same configuration across the sync
                    </Button.ToolTip>
                </Button>

                <!--? Display Setting Template List -->
                <GroupBox  Grid.Row="3" Grid.Column="1" adonisExtensions:LayerExtension.IncreaseLayer="True">
                    <ListBox Width="310" MaxHeight="210"
                             ItemsSource="{Binding DisplaySettings}"  SelectedItem="{Binding SelectedDisplaySetting}"
                             adonisExtensions:ScrollViewerExtension.HideScrollBarsUntilMouseOver="True"
                             adonisExtensions:ScrollViewerExtension.VerticalScrollBarPlacement="Overlay"
                             adonisExtensions:ScrollViewerExtension.HorizontalScrollBarPlacement="Overlay"
                             adonisExtensions:ScrollViewerExtension.HorizontalScrollBarExpansionMode="NeverExpand">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <!-- Display Index -->
                                    <TextBlock Text="{Binding DisplayIndex, StringFormat=Display {0}}" Margin="8,2,8,2"/>

                                    <!-- Interval Settings -->
                                    <StackPanel Margin="8,2,8,2" Orientation="Horizontal">

                                        <!-- Interval Value -->
                                        <TextBox MinWidth="35" Margin="0 0 2 0"
                                                 Text="{Binding DisplayInterval, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 IsEnabled="{Binding CanSetInterval}" 
                                                 ToolTip="Interval Value">
                                            <TextBox.Style>
                                                <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxNumInput}"/>
                                            </TextBox.Style>
                                        </TextBox>

                                        <!-- Interval Type -->
                                        <ComboBox ItemsSource="{Binding Source={extensions:Enumeration {x:Type core:IntervalType}}}"
                                                  DisplayMemberPath="Description"
                                                  SelectedValue="{Binding DisplayIntervalType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValuePath="Value">
                                            <ComboBox.ToolTip>
                                                <ToolTip Content="Interval Type"/>
                                            </ComboBox.ToolTip>
                                        </ComboBox>
                                    </StackPanel>

                                    <!-- Style Setting -->
                                    <ComboBox Margin="5,2,5,2"
                                              ItemsSource="{Binding Source={extensions:Enumeration {x:Type core:WallpaperStyle}}}"
                                              DisplayMemberPath="Description"
                                              SelectedValue="{Binding DisplayStyle, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              SelectedValuePath="Value">
                                        <ComboBox.ToolTip>
                                            <ToolTip Content="Style"/>
                                        </ComboBox.ToolTip>
                                    </ComboBox>

                                    <!-- Time Remaining -->
                                    <TextBlock Margin="12, 2, 8, 2"
                                               Text="{Binding DisplayTimerCurrent, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </GroupBox>
            </Grid>
        </GroupBox>

        <GridSplitter Grid.Row="4" Grid.Column="2" Width="5" ResizeDirection="Columns"/>

        <!--? Image Selector -->
        <GroupBox Grid.Row="4" Grid.RowSpan="2" Grid.Column="3" adonisExtensions:LayerExtension.IncreaseLayer="True" Margin=" 0 5 5 5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0"/>
                    <!--<ColumnDefinition Width="4*"/> Reminder that you can use this for proportions -->
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header Controls -->
                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <!-- TODO Standardize the Height, Margin, and maybe the Width here (Give them variables) -->
                    <Button Width="105" Height="25" Content="Select Image(s)" IsEnabled="{Binding CanSelectImages}" Margin="5 0 5 0" Command="{Binding SelectImagesCommand}" />
                    <Button Width="60" Height="25" Content="Inspect" Margin="3 0 3 0" Command="{Binding ToggleInspectorCommand}" IsEnabled="{Binding IsImageSelected}"/>
                    <Button Width="60" Height="25" Content="Clear" Margin="3 0 3 0" Command="{Binding ClearImagesCommand}"/>
                    <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
                    <Button Width="60" Height="25" Content="Rename" Margin="3 0 3 0" Command="{Binding RenameImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                    <Button Width="60" Height="25" Content="Move" Margin="3 0 3 0" Command="{Binding MoveImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                    <Button Width="60" Height="25" Content="Delete" Margin="3 0 3 0" Command="{Binding DeleteImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                    <Button Width="60" Height="25" Content="Rank" Margin="3 0 3 0" Command="{Binding RankImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                    <Button Width="105" Height="25" Content="Paste Tagboard" Margin="3 0 3 0" Command="{Binding PasteTagBoardCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                    <CheckBox Content="Rename Grouping" Margin="3" IsChecked="{Binding GroupRenamed}"
                              ToolTip="While this is checked, if multiple images with the same tags are renamed simultaneously, their numbering will be grouped together"/>
                    <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
                    <Button Width="75" Height="25" Content="Create Set" Margin="3 0 3 0 " Command="{Binding CreateRelatedImageSetCommand}"  IsEnabled="{Binding IsImageSelected}"
                            ToolTip="Builds a 'related image set' out of the selected images"/>
                    <Button Width="75" Height="25" Content="Add To Set" Margin="3 0 3 0 " Command="{Binding AddToImageSetCommand}" IsEnabled="{Binding IsImageSelected}"
                            ToolTip="If one set is selected, adds the currently selected images to the selected set"/>
                    <!--! Not really much of a point to Apply To All when SelectAllImages() exists -->
                    <!--x
                    <CheckBox Content="Apply To All" Margin="5" IsChecked="{Binding ApplyToAll}"
                              ToolTip="Will apply the given modification to all images in this selection. Like 'Select All' without the selection"/>
                    -->
                    <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
                    <Button Width="70" Height="25" Content="Select All" Margin="3 0 3 0" Command="{Binding SelectAllImagesCommand}"/>
                    <Button Width="70" Height="25" Content="Deselect" Margin="3 0 3 0" Command="{Binding DeselectImagesCommand}"/>
                </StackPanel>

                <!-- Selection Info -->
                <TextBlock Text="{Binding SelectedImagePathText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                           Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding SelectedImageDimensionsText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                           Grid.Row="3" Grid.Column="1" HorizontalAlignment="Center" />

                <!--? Image Selector -->
                <GroupBox Grid.Row="4" Grid.Column="1"
                          adonisExtensions:LayerExtension.IncreaseLayer="True" Margin="3">

                    <TabControl x:Name="ImageSelectorTabControl" ItemsSource="{Binding ImageSelectorTabs}"
                                SizeChanged="ImageSelectorTabControl_OnSizeChanged" SelectionChanged="ImageSelectorTabControl_OnSelectionChanged"
                                SelectedItem="{Binding SelectedImageSelectorTab, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                        <!-- Item Template [Header] -->
                        <TabControl.ItemTemplate>
                            <DataTemplate DataType="controlModels:ImageSelectorTabModel">
                                <TextBlock Text="{Binding TabIndex}"/>
                            </DataTemplate>
                        </TabControl.ItemTemplate>

                        <!-- Control Template [Enables Scrolling for the Tabs] -->
                        <TabControl.Template>
                            <ControlTemplate TargetType="{x:Type TabControl}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                        <TabPanel x:Name="HeaderPanel" IsItemsHost="True" Margin="0,4,0,0"/>
                                    </ScrollViewer>
                                    <ContentPresenter x:Name="PART_SelectedContentHost" Margin="4" ContentSource="SelectedContent" Grid.Row="1"/>
                                </Grid>
                            </ControlTemplate>
                        </TabControl.Template>

                        <!--? Content Template [Core Content/ListBox] -->
                        <TabControl.ContentTemplate>
                            <DataTemplate DataType="controlModels:ImageSelectorTabModel">
                                <!-- Image List Box -->
                                <ListBox ItemsSource="{Binding Items}" 
                                         SelectedItem="{Binding SelectedImage}"
                                         SelectionMode="Extended" SelectionChanged="ImageSelectorTabListBox_SelectionChanged"
                                         VirtualizingPanel.IsVirtualizing="true" 
                                         VirtualizingPanel.VirtualizationMode="Recycling"
                                         ItemTemplate="{StaticResource ImageSelectorItemTemplate}">

                                    <!-- Wrap Setup -->
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Width="{Binding ImageSelectorTabWrapWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                       ItemWidth="{StaticResource ImageSelectorItemWidth}" ItemHeight="{StaticResource ImageSelectorItemHeight}"  IsItemsHost="True"/>
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>

                                    <!-- Item Container Style [Handles Selection of multiple items by binding to the IsSelected property of the object] -->
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="{x:Type ListBoxItem}">
                                            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        </Style>
                                    </ListBox.ItemContainerStyle>

                                    <!--? // Image Info Item Template // -->
                                    <!-- x
                                    <ListBox.ItemTemplate>
                                    </ListBox.ItemTemplate>
                                    -->
                                </ListBox>
                            </DataTemplate>
                        </TabControl.ContentTemplate>
                    </TabControl>
                </GroupBox>

                <!-- Image Inspector -->
                <!--
                <Expander Grid.Row="4" Grid.Column="2"  Header="Inspect" ExpandDirection="Right">
                    <!- TODO Retire this StackPanel later, just here for reminders ->
                    <StackPanel>
                        <TextBlock Text="Some buttons and perhaps the image itself, include stuff that allows for image-independent control"/>
                        <TextBlock Text="Tags, allow for tags to ignore naming restrictions here"/>
                    </StackPanel>
 
                </Expander>
                -->

            </Grid>
        </GroupBox>

        <!--? Image Inspector Drawer -->
        <hc:Drawer Dock="Left" ShowMode="Cover" IsOpen="{Binding InspectorToggle}">
            <ScrollViewer Height="{Binding InspectorHeight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                <GroupBox Width="{StaticResource InspectorWidth}"
                          adonisExtensions:ScrollViewerExtension.HideScrollBarsUntilMouseOver="True"
                          adonisExtensions:ScrollViewerExtension.VerticalScrollBarPlacement="Overlay"
                          adonisExtensions:ScrollViewerExtension.VerticalScrollBarExpansionMode="ExpandOnHover"
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                          BorderBrush="DarkGray" BorderThickness="2">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <!--<ColumnDefinition Width="{adonisUi:Space 1}"/>-->
                            <ColumnDefinition Width="0"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="0"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <!-- TODO Create a converter from double to GridLength so that you can update this with the tag ListBox size -->
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center" Text="Inspector" FontWeight="Medium" Margin="0 0 0 5">
                            <TextBlock.Style>
                                <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource FaintHeader}"/>
                            </TextBlock.Style>
                        </TextBlock>
                        <Button Grid.Row="1" Grid.Column="3" HorizontalAlignment="Right" Content="X" Command="{Binding CloseInspectorCommand}" 
                            Margin="5 0 5 0" Foreground="Red" FontSize="16" FontWeight="Bold" adonisExtensions:LayerExtension.Layer="1"/>

                        <!--? Image Viewer -->
                        <GroupBox  Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"
                                   Margin="0 5 0 0" HorizontalAlignment="Center">
                            <StackPanel Focusable="False">

                                <!-- //// Binding to ImageModel //// -->
                                <ContentControl Content="{Binding SelectedImageModel}" HorizontalAlignment="Center">
                                    <!-- Resources -->
                                    <ContentControl.Resources>
                                        <!-- Remember that the Binding context here refers to what's given in the Content of the ContentTemplate, not what ReSharper says -->

                                        <!--? // StaticOrGIFTemplate // -->
                                        <DataTemplate x:Key="StaticOrGIFTemplate">
                                            <ContentControl Content="{Binding}">
                                                <!-- Resources -->
                                                <ContentControl.Resources>
                                                    <!-- Static -->
                                                    <DataTemplate x:Key="StaticTemplate">
                                                        <!--? Image_Onloaded IS NEEDED TO ENSURE THAT A SWITCH FROM A GIF (and maybe video?) TO IMAGE IS DONE SUCCESSFULLY!!! -->
                                                        <Image Loaded="Image_OnLoaded" DataContextChanged="Inspector_OnDataContextChanged"/>
                                                    </DataTemplate>
                                                    <!-- GIF -->
                                                    <DataTemplate x:Key="GIFTemplate">
                                                        <MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play"
                                                                      Loaded="Tooltip_MediaElement_OnLoaded" DataContextChanged="Inspector_OnDataContextChanged"  MediaEnded="MediaElement_OnMediaEnded"/>
                                                    </DataTemplate>
                                                </ContentControl.Resources>
                                                <!-- Template Control -->
                                                <ContentControl.ContentTemplate>
                                                    <DataTemplate>
                                                        <!-- Default Template -->
                                                        <ContentControl Name="cc" Content="{Binding }" 
                                                                                ContentTemplate="{StaticResource StaticTemplate}"/>
                                                        <!-- Triggers -->
                                                        <DataTemplate.Triggers>
                                                            <DataTrigger Binding="{Binding IsGif}" Value="True">
                                                                <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource GIFTemplate}"/>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </ContentControl.ContentTemplate>
                                            </ContentControl>
                                        </DataTemplate>

                                        <!--? // VideoTemplate // -->
                                        <DataTemplate x:Key="VideoTemplate">
                                            <GroupBox adonisExtensions:LayerExtension.IncreaseLayer="False" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <ContentControl Content="{Binding }">
                                                    <ContentControl.Resources>
                                                        <!-- ? FFME -->
                                                        <DataTemplate x:Key="FFME">
                                                            <ffme:MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" LoopingBehavior="Play"
                                                                               Loaded="Tooltip_MediaElement_OnLoaded" DataContextChanged="Inspector_OnDataContextChanged"
                                                                               Volume="{Binding ActualVolume, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </DataTemplate>
                                                        <!-- ? Windows -->
                                                        <DataTemplate x:Key="Windows">
                                                            <MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play"
                                                                          Loaded="Tooltip_MediaElement_OnLoaded" DataContextChanged="Inspector_OnDataContextChanged"  MediaEnded="MediaElement_OnMediaEnded"
                                                                          Volume="{Binding ActualVolume, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </DataTemplate>
                                                    </ContentControl.Resources>
                                                    <ContentControl.ContentTemplate>
                                                        <DataTemplate>
                                                            <!-- Default Template -->
                                                            <ContentControl Name="cc" Content="{Binding }" 
                                                                                        ContentTemplate="{StaticResource Windows}"/>
                                                            <!-- Triggers -->
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding IsWebmOrGif}" Value="True">
                                                                    <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                    <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource FFME}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </ContentControl.ContentTemplate>
                                                </ContentControl>
                                            </GroupBox>
                                            <!--</Border>-->
                                        </DataTemplate>
                                    </ContentControl.Resources>

                                    <!-- // Template Control // -->
                                    <ContentControl.ContentTemplate>
                                        <DataTemplate>
                                            <!-- Default Control -->
                                            <ContentControl Name="cc" Content="{Binding }" ContentTemplate="{StaticResource StaticOrGIFTemplate}"/>
                                            <!-- Triggers -->
                                            <DataTemplate.Triggers>
                                                <!-- If IsVideo, use the VideoTemplate instead -->
                                                <DataTrigger Binding="{Binding IsVideo}" Value="True">
                                                    <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource VideoTemplate}"/>
                                                </DataTrigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </ContentControl.ContentTemplate>
                                </ContentControl>
                            </StackPanel>
                        </GroupBox>

                        <!--? Tags -->
                        <GroupBox Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3"
                              adonisExtensions:LayerExtension.IncreaseLayer="True" adonisExtensions:LayerExtension.Layer="2">
                            <!-- Header -->
                            <GroupBox.Header>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="0"/>
                                        <RowDefinition Height="auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center" Text="Tags" FontWeight="Medium" Margin="0 0 0 5">
                                        <TextBlock.Style>
                                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource FaintHeader}"/>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </GroupBox.Header>

                            <!--? ListBox  -->
                            <ListBox ItemsSource="{Binding InspectedImageTags}" SelectionMode="Extended" Height="{StaticResource InspectorTagHeight}"
                                 adonisExtensions:ScrollViewerExtension.HideScrollBarsUntilMouseOver="True"
                                 adonisExtensions:ScrollViewerExtension.VerticalScrollBarPlacement="Overlay"
                                 adonisExtensions:ScrollViewerExtension.VerticalScrollBarExpansionMode="ExpandOnHover"
                                 ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                                <!-- Wrap Setup -->
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel IsItemsHost="True" Width="{StaticResource InspectorWidth}"/>
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>

                                <!-- Tags Item Template -->
                                <ListBox.ItemTemplate>
                                    <DataTemplate DataType="tagging:TagModel">
                                        <!-- The GroupBox adds a fitting adonis background to every tag -->
                                        <GroupBox  adonisExtensions:LayerExtension.IncreaseLayer="True" adonisExtensions:CornerRadiusExtension.CornerRadius="15">
                                            <StackPanel Orientation="Horizontal">
                                                <Button VerticalAlignment="Center" Content="{Binding ExceptionText}"
                                                        Visibility="{Binding UseForNaming_IncludeCategory, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,
                                                            Converter={StaticResource BooleanToVisibilityInvertedConverter}}"
                                                        Command="{Binding ToggleNamingExceptionCommand}" FontSize="10" FontWeight="Medium" 
                                                        Foreground="{Binding ExceptionColor, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, 
                                                    Converter={StaticResource ColorToBrushConverter}}"
                                                        Margin="5 0 5 0" ToolTip="Toggles the Naming Exception status of this tag.
                                                        Naming Exceptions are used in tag-based auto-naming regardless of restrictions"/>
                                                <TextBlock VerticalAlignment="Center" Text="{Binding Name, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                                           Foreground="{Binding ExceptionColor, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, 
                                                    Converter={StaticResource ColorToBrushConverter}}"/>
                                                <Button VerticalAlignment="Center" Content="X"  Command="{Binding RemoveTagFromSelectedImageCommand}" 
                                                    Foreground="Red" FontSize="10" FontWeight="Medium" Margin="5 0 5 0"/>
                                            </StackPanel>
                                        </GroupBox>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </GroupBox>

                        <!--? Settings -->
                        <GroupBox Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="3" Height="{StaticResource InspectorCategoryHeight}"
                                  adonisExtensions:LayerExtension.IncreaseLayer="True" adonisExtensions:LayerExtension.Layer="2">
                            <!-- Header -->
                            <GroupBox.Header>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="0"/>
                                        <RowDefinition Height="auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center" Text="Settings" FontWeight="Medium" Margin="0 0 0 5">
                                        <TextBlock.Style>
                                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource FaintHeader}"/>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </GroupBox.Header>

                            <StackPanel>

                                <!-- ! Any universal settings go here -->

                                <!-- //// Binding to ImageModel //// -->
                                <ContentControl Content="{Binding SelectedImage}" HorizontalAlignment="Center">
                                    <!-- Resources -->
                                    <ContentControl.Resources>
                                        <!-- Remember that the Binding context here refers to what's given in the Content of the ContentTemplate, not what ReSharper says -->

                                        <!--? // StaticTemplate // -->
                                        <DataTemplate x:Key="StaticTemplate">
                                            <!-- Placeholder for future static-specific settings -->
                                        </DataTemplate>

                                        <!--? // VideoOrGifTemplate // -->
                                        <DataTemplate x:Key="VideoOrGifTemplate">
                                            <StackPanel>

                                                <!-- Minimum Loops -->
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Minimum Loops " VerticalAlignment="Center"
                                                               IsEnabled="{Binding OverrideMinimumLoops, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    <TextBox adonisExtensions:WatermarkExtension.Watermark="Loops..." Margin="5 5 5 0"
                                                         Text="{Binding MinimumLoops, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         IsEnabled="{Binding OverrideMinimumLoops, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                                        <TextBox.Style>
                                                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxNumInput}"/>
                                                        </TextBox.Style>
                                                    </TextBox>
                                                    <CheckBox Content="Override" IsChecked="{Binding OverrideMinimumLoops, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                </StackPanel>

                                                <!-- Maximum Time -->
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Maximum Time " VerticalAlignment="Center" 
                                                               IsEnabled="{Binding OverrideMaximumTime, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    <TextBox adonisExtensions:WatermarkExtension.Watermark="Seconds..." Margin="5 5 5 0"
                                                         Text="{Binding MaximumTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         IsEnabled="{Binding OverrideMaximumTime, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                                        <TextBox.Style>
                                                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxNumInput}"/>
                                                        </TextBox.Style>
                                                    </TextBox>
                                                    <CheckBox Content="Override" IsChecked="{Binding OverrideMaximumTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                </StackPanel>

                                                <!-- Speed -->
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="Speed " VerticalAlignment="Center"/>
                                                    <TextBox adonisExtensions:WatermarkExtension.Watermark="Mult..." Margin="5 5 3 0"
                                                         Text="{Binding Speed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                        <TextBox.Style>
                                                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxNumInput}"/>
                                                        </TextBox.Style>
                                                    </TextBox>
                                                </StackPanel>

                                                <ContentControl Content="{Binding }">
                                                    <ContentControl.Resources>
                                                        <!-- ? VideoSettingsTemplate -->
                                                        <DataTemplate x:Key="VideoSettingsTemplate">
                                                            <StackPanel>

                                                                <!-- Volume -->
                                                                <StackPanel Orientation="Horizontal">
                                                                    <TextBlock Text="Volume: " VerticalAlignment="Center"/>
                                                                    <Slider Value="{Binding Volume, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="100" Maximum="100"
                                                                            TickFrequency="1" IsSnapToTickEnabled="True" Margin="5 5 3 0"/>
                                                                    <TextBox adonisExtensions:WatermarkExtension.Watermark="Volume..." Margin="5 5 3 0" 
                                                                             adonisExtensions:LayerExtension.Layer="3"
                                                                             Text="{Binding Volume, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                        <TextBox.Style>
                                                                            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxNumInput}"/>
                                                                        </TextBox.Style>
                                                                    </TextBox>
                                                                </StackPanel>

                                                            </StackPanel>
                                                        </DataTemplate>
                                                        <!-- ? GifSettingsTemplate -->
                                                        <DataTemplate x:Key="GifSettingsTemplate">
                                                            <!-- Placeholder for future gif-specific settings -->
                                                        </DataTemplate>
                                                    </ContentControl.Resources>
                                                    <ContentControl.ContentTemplate>
                                                        <DataTemplate>
                                                            <!-- Default Template -->
                                                            <ContentControl Name="cc" Content="{Binding }" 
                                                                                        ContentTemplate="{StaticResource VideoSettingsTemplate}"/>
                                                            <!-- Triggers -->
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding IsGif}" Value="True">
                                                                    <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                    <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource GifSettingsTemplate}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </ContentControl.ContentTemplate>
                                                </ContentControl>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ContentControl.Resources>

                                    <!-- // Template Control // -->
                                    <ContentControl.ContentTemplate>
                                        <DataTemplate>
                                            <!-- Default Control -->
                                            <ContentControl Name="cc" Content="{Binding }" ContentTemplate="{StaticResource StaticTemplate}"/>
                                            <!-- Triggers -->
                                            <DataTemplate.Triggers>
                                                <!-- If IsVideo, use the VideoTemplate instead -->
                                                <DataTrigger Binding="{Binding IsVideoOrGif}" Value="True">
                                                    <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource VideoOrGifTemplate}"/>
                                                </DataTrigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </ContentControl.ContentTemplate>
                                </ContentControl>
                            </StackPanel>
                        </GroupBox>
                    </Grid>
                </GroupBox>
            </ScrollViewer>
        </hc:Drawer>

        <!--? Image Set Inspector Drawer -->
        <hc:Drawer  Dock="Right" ShowMode="Cover" IsOpen="{Binding ImageSetInspectorToggle}">
            <GroupBox Width="{StaticResource ImageSetInspectorWidth}" Height="{Binding InspectorHeight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                      adonisExtensions:ScrollViewerExtension.HideScrollBarsUntilMouseOver="True"
                      adonisExtensions:ScrollViewerExtension.VerticalScrollBarPlacement="Overlay"
                      adonisExtensions:ScrollViewerExtension.VerticalScrollBarExpansionMode="ExpandOnHover"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                      BorderBrush="DarkGray" BorderThickness="2">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <!--<ColumnDefinition Width="{adonisUi:Space 1}"/>-->
                        <ColumnDefinition Width="0"/>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!--? Title & Exit Button -->
                    <TextBlock Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" HorizontalAlignment="Center" Text="Image Set Inspector" FontWeight="Medium" Margin="0 0 0 5">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource FaintHeader}"/>
                        </TextBlock.Style>
                    </TextBlock>
                    <Button Grid.Row="1" Grid.Column="3" HorizontalAlignment="Right" Content="X" Command="{Binding CloseImageSetInspectorCommand}" 
                            Margin="5 0 5 0" Foreground="Red" FontSize="16" FontWeight="Bold" adonisExtensions:LayerExtension.Layer="1"/>

                    <!--? Header Controls -->
                    <StackPanel Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Width="60" Height="25" Content="Inspect" Margin="3 0 3 0" Command="{Binding ToggleInspectorCommand}" IsEnabled="{Binding IsImageSelected}"/>
                        <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
                        <Button Width="60" Height="25" Content="Rename" Margin="3 0 3 0" Command="{Binding RenameImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                        <Button Width="60" Height="25" Content="Move" Margin="3 0 3 0" Command="{Binding MoveImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                        <Button Width="60" Height="25" Content="Delete" Margin="3 0 3 0" Command="{Binding DeleteImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                        <Button Width="60" Height="25" Content="Rank" Margin="3 0 3 0" Command="{Binding RankImagesCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                        <Button Width="105" Height="25" Content="Paste Tagboard" Margin="3 0 3 0" Command="{Binding PasteTagBoardCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                        <Button Width="110" Height="25" Content="Remove From Set" Margin="3 0 3 0" Command="{Binding RemoveFromSetCommand}"  IsEnabled="{Binding IsImageSelected}"/>
                        <CheckBox Content="Rename Grouping" Margin="3" IsChecked="{Binding GroupRenamed}"
                              ToolTip="While this is checked, if multiple images with the same tags are renamed simultaneously, their numbering will be grouped together"/>
                    </StackPanel>

                    <!--? Selection Info -->
                    <TextBlock Text="{Binding SelectedImagePathText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                   Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="3" HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding SelectedImageDimensionsText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                   Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="3" HorizontalAlignment="Center" />

                    <!--? Mini Image Selector -->
                    <!-- The image set is essentially the tab here -->
                    <GroupBox Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="3">
                        <ListBox  
                                  Margin="0 5 0 0" HorizontalAlignment="Center" 
                                  ItemsSource="{Binding InspectedImageSetImages}" 
                                  SelectedItem="{Binding SelectedImage}"
                                  SelectionMode="Extended"
                                  SelectionChanged="ImageSetListBox_SelectionChanged"
                                  VirtualizingPanel.IsVirtualizing="true" 
                                  VirtualizingPanel.VirtualizationMode="Recycling"
                                  ItemTemplate="{StaticResource ImageSelectorItemTemplate}"
                                  Width="{StaticResource ImageSetInspectorListBoxWidth}"
                                  Height="{Binding ImageSetInspectorListBoxHeight, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">

                            <!-- Wrap Setup -->
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Width="{StaticResource ImageSetInspectorListBoxWidth}"
                                                   ItemWidth="{StaticResource ImageSelectorItemWidth}" ItemHeight="{StaticResource ImageSelectorItemHeight}" IsItemsHost="True"/>
                                    <!--
                                        <WrapPanel Width="{Binding ImageSetInspectorWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                   ItemWidth="{StaticResource ImageSelectorItemWidth}" ItemHeight="{StaticResource ImageSelectorItemHeight}" IsItemsHost="True"/>
                                        -->
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>

                            <!-- Item Container Style [Handles Selection of multiple items by binding to the IsSelected property of the object] -->
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="{x:Type ListBoxItem}">
                                    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </Style>
                            </ListBox.ItemContainerStyle>

                            <!--? // Image Info Item Template // -->
                            <!-- x
                                    <ListBox.ItemTemplate>
                                    </ListBox.ItemTemplate>
                                    -->
                        </ListBox>
                    </GroupBox>
                </Grid>
            </GroupBox>
        </hc:Drawer>

        <!--? NotifyIcon -->
        <tb:TaskbarIcon
                        Visibility="Visible"
                        ToolTipText="(Theme.json | Wallpaper Seconds Remaining [] [] [] [])"
                        MenuActivation="RightClick"
                        LeftClickCommand="{Binding OpenWindowsCommand}">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Open" Command="{Binding OpenWindowsCommand}"/>
                    <MenuItem Header="Next Wallpaper" Command="{Binding NextWallpaperCommand}" IsEnabled="{Binding CanNextWallpaper}" StaysOpenOnClick="True"/>
                    <MenuItem Header="Previous Wallpaper" Command="{Binding PreviousWallpaperCommand}" IsEnabled="{Binding CanPreviousWallpaper}" StaysOpenOnClick="True"/>
                    <MenuItem Header="Set Default Theme"/>
                    <Separator/>
                    <MenuItem Header="Active Wallpapers" StaysOpenOnClick="True">
                        <ListBox ItemsSource="{Binding ActiveWallpapers}" Focusable="False">
                            <ListBox.ItemTemplate>
                                <DataTemplate DataType="models:ImageModel">
                                    <GroupBox>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding PathName}" Foreground="White" VerticalAlignment="Center" ToolTipService.ShowDuration="{StaticResource MaxInt32}">
                                            <!--? Tooltips -->
                                            <!-- TODO Create a template for tooltips -->
                                                <TextBlock.ToolTip>
                                                    <ContentControl Content="{Binding}">
                                                        <!-- Resources -->
                                                        <ContentControl.Resources>
                                                            <!-- Static -->
                                                            <DataTemplate x:Key="StaticTemplate">
                                                                <Image Loaded="Tooltip_Image_OnLoaded"
                                                                                        Unloaded="Tooltip_Image_OnUnloaded"
                                                                                        Stretch="Uniform"
                                                                                        RenderOptions.BitmapScalingMode="HighQuality">
                                                                    <!--
                                                                                        <Image.Source>
                                                                                            <BitmapImage
                                                                                                CacheOption="OnLoad"
                                                                                                UriSource="{Binding Path, Mode=OneWay}">
                                                                                            </BitmapImage>
                                                                                        </Image.Source>
                                                                                        -->
                                                                </Image>
                                                            </DataTemplate>
                                                            <!-- GIF -->
                                                            <DataTemplate x:Key="GIFTemplate">
                                                                <ffme:MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" LoopingBehavior="Play"
                                                                                        Loaded="Tooltip_MediaElement_OnLoaded" Unloaded="Tooltip_MediaElement_OnUnloaded" />
                                                            </DataTemplate>
                                                            <!-- Video -->
                                                            <DataTemplate x:Key="VideoTemplate">
                                                                <ContentControl Content="{Binding }">
                                                                    <ContentControl.Resources>
                                                                        <!--? FFME -->
                                                                        <DataTemplate x:Key="FFME">
                                                                            <ffme:MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" LoopingBehavior="Play"
                                                                                        Loaded="Tooltip_MediaElement_OnLoaded" Unloaded="Tooltip_MediaElement_OnUnloaded" 
                                                                                        Volume="{Binding ActualVolume, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                        </DataTemplate>
                                                                        <!--? Windows -->
                                                                        <DataTemplate x:Key="Windows">
                                                                            <MediaElement UnloadedBehavior="Manual" LoadedBehavior="Play" MediaEnded="MediaElement_OnMediaEnded"
                                                                                        Loaded="Tooltip_MediaElement_OnLoaded" Unloaded="Tooltip_MediaElement_OnUnloaded" 
                                                                                        Volume="{Binding ActualVolume, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                        </DataTemplate>
                                                                    </ContentControl.Resources>
                                                                    <ContentControl.ContentTemplate>
                                                                        <DataTemplate>
                                                                            <!-- Default Template -->
                                                                            <ContentControl Name="cc" Content="{Binding }" 
                                                                                        ContentTemplate="{StaticResource Windows}"/>
                                                                            <!-- Triggers -->
                                                                            <DataTemplate.Triggers>
                                                                                <DataTrigger Binding="{Binding IsWebmOrGif}" Value="True">
                                                                                    <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                                    <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource FFME}"/>
                                                                                </DataTrigger>
                                                                            </DataTemplate.Triggers>
                                                                        </DataTemplate>
                                                                    </ContentControl.ContentTemplate>
                                                                </ContentControl>
                                                            </DataTemplate>
                                                        </ContentControl.Resources>
                                                        <!--? Template Control -->
                                                        <ContentControl.ContentTemplate>
                                                            <DataTemplate>
                                                                <!-- Default Template -->
                                                                <ContentControl Name="cc" Content="{Binding }" 
                                                                                ContentTemplate="{StaticResource StaticTemplate}"/>
                                                                <!-- Triggers -->
                                                                <DataTemplate.Triggers>
                                                                    <DataTrigger Binding="{Binding IsGif}" Value="True">
                                                                        <!-- Sets the ContentTemplate to be GIFTemplate instead of StaticTemplate -->
                                                                        <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource GIFTemplate}"/>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding IsVideo}" Value="True">
                                                                        <Setter TargetName="cc" Property="ContentTemplate" Value="{StaticResource VideoTemplate}"/>
                                                                    </DataTrigger>
                                                                </DataTemplate.Triggers>
                                                            </DataTemplate>
                                                        </ContentControl.ContentTemplate>
                                                    </ContentControl>
                                                </TextBlock.ToolTip>
                                            <!-- TODO Make this function properly so that you can replace the buttons -->
                                                <TextBlock.ContextMenu>
                                                    <ContextMenu>
                                                        <MenuItem Header="Open File" mvx:Bi.nd="Command OpenFileCommand"/>
                                                        <MenuItem Header="Open File Location" mvx:Bi.nd="Command ViewFileCommand"/>
                                                    </ContextMenu>
                                                </TextBlock.ContextMenu>
                                            </TextBlock>
                                            <ContentControl Content="{Binding}" ContentTemplate="{StaticResource RankingHandlerTemplate}"/>
                                            <Button Content="Open" Command="{Binding OpenFileCommand}" Margin="5"/>
                                            <Button Content="View" Command="{Binding ViewFileCommand}" Margin="5"/>
                                            <Button Content="Inspect" Command="{Binding InspectCommand}" Margin="5"/>
                                        </StackPanel>
                                    </GroupBox>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </MenuItem>
                    <Separator/>
                    <MenuItem Header="Exit" Command="{Binding CloseAppCommand}"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

    </Grid>
</views:MvxWpfView>